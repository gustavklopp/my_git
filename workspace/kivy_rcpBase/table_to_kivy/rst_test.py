'''rst can load image png (and jpeg)
GIF NOT WORKING !!! '''

from kivy.uix.rst import RstDocument
from kivy.uix.boxlayout import BoxLayout
from kivy.app import App

class RstItem(RstDocument):
    
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
#         self.size_hint_y = None
#         self.height = 100
        print(self.height)
 

class RstTestApp(App):
    def build(self):
#         return RstDocument(text = """
#  .. image:: image.gif 
# .. image:: image.png
# .. image:: tamagotchi.jpg
# This is a test \n secondline \nthirdline \n\n FOurthLine \n\nFifth Line
# """)
#         text_test = """\n          \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n+--------------------------------+----------------------------------------------------------------------------------------------------------------------------+\n|  Classe de système d’organes   | Effets indésirables, par                                                                                                   |\n|                                | fréquence                                                                                                                  |\n+================================+==========================+===============================+================================+================================+\n|                                | Très fréquent ≥ 1/10     | Fréquent ≥ 1/100, < 1/10      | Peu fréquent ≥ 1/1 000, <      | Fréquence indéterminée (ne     |\n|                                |                          |                               | 1/100                          | peut être estimée à partir des |\n|                                |                          |                               |                                | données disponibles)           |\n+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+\n| Affections du système          |                          |                               | Hypersensibilité               |                                |\n| immunitaire                    |                          |                               |                                |                                |\n+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+\n| Troubles du métabolisme et de  |                          |                               | Anorexie Diminution de         |                                |\n| la nutrition                   |                          |                               | l’appétit                      |                                |\n+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+\n| Affections psychiatriques      |                          |                               | Dépression Paranoïa  Etat      | Hallucinations                 |\n|                                |                          |                               | confusionnel Désorientation    |                                |\n|                                |                          |                               | Modifications de l’état mental |                                |\n|                                |                          |                               | Anxiété Euphorie Dysphorie     |                                |\n|                                |                          |                               | Labilité émotionnelle Troubles |                                |\n|                                |                          |                               | de l’attention                 |                                |\n+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+\n| Affections du système nerveux  |                          | Vertiges Céphalées Somnolence | Amnésie Parosmie  Dysgueusie   | Convulsions                    |\n|                                |                          |                               | Tremblement Léthargie          |                                |\n|                                |                          |                               | Hypoesthésie Insomnie Troubles |                                |\n|                                |                          |                               | du sommeil                     |                                |\n+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+\n| Affections oculaires           |                          |                               | Vision floue                   |                                |\n+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+\n| Affections cardiaques          |                          |                               | Tachycardie  Bradycardie       |                                |\n+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+\n| Affections vasculaires         |                          |                               | Hypotension                    |                                |\n+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+\n| Affections respiratoires,      |                          | Dyspnée                       | Douleur oro-pharyngée          | Dépression respiratoire        |\n| thoraciques et médiastinales   |                          |                               | Sensation de constriction de   |                                |\n|                                |                          |                               | la gorge                       |                                |\n+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+\n| Affections gastro-intestinales | Nausées                  | Stomatite Vomissements        | Ulcération buccale Ulcération  | Œdème de la langue Diarrhée    |\n|                                |                          | Constipation Sécheresse       | gingivale Ulcération labiale   |                                |\n|                                |                          | buccale                       | Vidange gastrique retardée     |                                |\n|                                |                          |                               | Douleur abdominale Dyspepsie   |                                |\n|                                |                          |                               | Gêne gastrique Affection de la |                                |\n|                                |                          |                               | langue Stomatite aphteuse      |                                |\n+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+\n| Affections de la peau et du    |                          | Hyperhidrose                  | Lésion cutanée  Rash Prurit    |                                |\n| tissu sous-cutané              |                          |                               | allergique Prurit Sueurs       |                                |\n|                                |                          |                               | nocturnes Tendance accrue aux  |                                |\n|                                |                          |                               | ecchymoses                     |                                |\n+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+\n| Affections musculo-            |                          |                               | Arthralgies Raideur musculo-   |                                |\n| squelettiques et systémiques   |                          |                               | squelettiques Raideur          |                                |\n|                                |                          |                               | articulaire                    |                                |\n+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+\n| Affections des organes de      |                          |                               | Dysfonction érectile           |                                |\n| reproduction et du sein        |                          |                               |                                |                                |\n+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+\n| Troubles généraux et anomalies |                          | Fatigue                       | Syndrome de sevrage  Asthénie  | Bouffée vasomotrice et bouffée |\n| au site d’administration       |                          |                               | Malaise                        | de chaleur Œdème périphérique  |\n+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+\n| Lésions, intoxications et      |                          |                               | Surdosage accidentel           | Chutes                         |\n| complications liées aux        |                          |                               |                                |                                |\n| procédures                     |                          |                               |                                |                                |\n+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+""" 
#         print(text_test)
        text_test2 ="""
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin tristique urna vel dui accumsan cursus. Nunc vel nunc odio. Vestibulum at sem nec ligula gravida fermentum. Nullam sed metus bibendum, accumsan mi quis, tempor mauris. Integer sit amet tempus metus. Praesent volutpat nisi euismod mauris sodales, a elementum est aliquam. Nulla tincidunt enim ac metus elementum, id sollicitudin dui rhoncus. In quis convallis nisi. Maecenas convallis ligula a purus interdum, ac lacinia lectus maximus.

+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+
|  Lorem ipsum dolor             | Lorem ipsum dolor        |               X               |               X                |               X                |
|                                | Lorem ipsum dolor        |                               |                                |                                |
+================================+==========================+===============================+================================+================================+
|                                | Lorem ipsum dolor        | Lorem ipsum dolor             | Lorem ipsum dolor              | Lorem ipsum dolor              |
|                                |                          |                               | Lorem ipsum dolor              | Lorem ipsum dolor              |
|                                |                          |                               |                                | Lorem ipsum dolor              |
+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+
| Lorem ipsum dolor              |                          |                               | Hypersensibilité               |                                |
| Lorem ipsum dolor              |                          |                               |                                |                                |
+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+
| Troubles du métabolisme et de  |                          |                               | Anorexie Diminution de         |                                |
| la nutrition                   |                          |                               | l’appétit                      |                                |
+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+
| Affections psychiatriques      |                          |                               | Dépression Paranoïa  Etat      | Hallucinations                 |
|                                |                          |                               | confusionnel Désorientation    |                                |
|                                |                          |                               | Modifications de l’état mental |                                |
|                                |                          |                               | Anxiété Euphorie Dysphorie     |                                |
|                                |                          |                               | Labilité émotionnelle Troubles |                                |
|                                |                          |                               | de l’attention                 |                                |
+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+
| Affections du système nerveux  |                          | Vertiges Céphalées Somnolence | Amnésie Parosmie  Dysgueusie   | Convulsions                    |
|                                |                          |                               | Tremblement Léthargie          |                                |
|                                |                          |                               | Hypoesthésie Insomnie Troubles |                                |
|                                |                          |                               | du sommeil                     |                                |
+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+
| Affections oculaires           |                          |                               | Vision floue                   |                                |
+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+
| Affections cardiaques          |                          |                               | Tachycardie  Bradycardie       |                                |
+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+
| Affections vasculaires         |                          |                               | Hypotension                    |                                |
+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+
| Affections respiratoires,      |                          | Dyspnée                       | Douleur oro-pharyngée          | Dépression respiratoire        |
| thoraciques et médiastinales   |                          |                               | Sensation de constriction de   |                                |
|                                |                          |                               | la gorge                       |                                |
+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+
| Affections gastro-intestinales | Nausées                  | Stomatite Vomissements        | Ulcération buccale Ulcération  | Œdème de la langue Diarrhée    |
|                                |                          | Constipation Sécheresse       | gingivale Ulcération labiale   |                                |
|                                |                          | buccale                       | Vidange gastrique retardée     |                                |
|                                |                          |                               | Douleur abdominale Dyspepsie   |                                |
|                                |                          |                               | Gêne gastrique Affection de la |                                |
|                                |                          |                               | langue Stomatite aphteuse      |                                |
+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+
| Affections de la peau et du    |                          | Hyperhidrose                  | Lésion cutanée  Rash Prurit    |                                |
| tissu sous-cutané              |                          |                               | allergique Prurit Sueurs       |                                |
|                                |                          |                               | nocturnes Tendance accrue aux  |                                |
|                                |                          |                               | ecchymoses                     |                                |
+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+
| Affections musculo-            |                          |                               | Arthralgies Raideur musculo-   |                                |
| squelettiques et systémiques   |                          |                               | squelettiques Raideur          |                                |
|                                |                          |                               | articulaire                    |                                |
+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+
| Affections des organes de      |                          |                               | Dysfonction érectile           |                                |
| reproduction et du sein        |                          |                               |                                |                                |
+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+
| Troubles généraux et anomalies |                          | Fatigue                       | Syndrome de sevrage  Asthénie  | Bouffée vasomotrice et bouffée |
| au site d’administration       |                          |                               | Malaise                        | de chaleur Œdème périphérique  |
+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+
| Lésions, intoxications et      |                          |                               | Surdosage accidentel           | Chutes                         |
| complications liées aux        |                          |                               |                                |                                |
| procédures                     |                          |                               |                                |                                |
+--------------------------------+--------------------------+-------------------------------+--------------------------------+--------------------------------+

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin tristique urna vel dui accumsan cursus. Nunc vel nunc odio. Vestibulum at sem nec ligula gravida fermentum. Nullam sed metus bibendum, accumsan mi quis, tempor mauris. Integer sit amet tempus metus. Praesent volutpat nisi euismod mauris sodales, a elementum est aliquam. Nulla tincidunt enim ac metus elementum, id sollicitudin dui rhoncus. In quis convallis nisi. Maecenas convallis ligula a purus interdum, ac lacinia lectus maximus.
"""  
        print([text_test2])
        mybox = BoxLayout()
        
        myrst = RstItem(text=text_test2)
        mybox.add_widget(myrst)
        return mybox       

if __name__ == '__main__':
    RstTestApp().run()